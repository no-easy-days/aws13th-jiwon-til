# 보안: 사람을 믿지 마라

AWS 보안의 시발점: IAM

Well-Architected Framework: 보안 원칙

클라우드

- 인터넷.
- on-demand.
- 쓴만 큼 비용을 지불한다.

IaC : 접근방식 ( 클라우드는 다름에서 시작한다 )

## AWS 인프라 구성

- 데이터 센터 ( 여러개 ) 묶음 → 가용용역 (AZ)
- 각각의 AZ는 독립적으로 구성
- 인프라 시설 Region, AZ, edge Location

## 공동 책임 모델

- 

![image.png](attachment:81fe5ef9-d9a3-4a21-9c33-ba7ff0cf6b68:image.png)

AWS Config → Rule을 만드는 것

규정을 잘 만들어서 규정 순수 상태 유지하는 것이 중요하다.

# IAM 중요

IAM : 사용자에 대한

AuthN(인증) → who?

AuthZ(권한) → what?

두 가지를 Mapping 하는 것이 중요하다.

IAM 구성요소 4가지

- User
    
    사용자를 인증하는 방식이 2가지가 있다.(Management Console → ID & PASSWORD/ AWS CLI or SDK(API) → AK/SAK(Access Key, Secret Access Key)
    
    ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
    
    Account: email / pw로 구성 → MFA 적용해라. (S/W방식, H/W방식이 있는데 H/W 사용 권장), superuser/root: MC , AK/SAK로 구성 → AK/SAK는 쓰지 않는 것으로 권장(털리면 데이터센터까지 다 털림)
    
    ★ Account와 User는 다르다. Account가 최고 계정
    
- Group:
    
    사용자만 포함할 수 있다. ( 그룹끼리는 불가능)
    
- Policy:
    - 권한을 부여하는 개념 / Policy를 통해 특정 사용자나 그룹에 권한을 부여
    - json으로 구성되있다 / managed 방식(1:N) + inline 방식(1:1) [ policy에 대한 재사용성 x) , 두 방식을 같이 사용하거나 하나씩 사용
    - user-based / resource-based → 두 가지에 대한 권한 충돌에 대한 인식이 필요 (resource단위 권한이 사용자 단위 권한보다 높다, 리소스 단위의 권한은 모두 inline 방식의 성격이다.)
- Role:
    
    되게 중요한 개념. (모자(API) 쓰듯이) 필요한 권한을 임시적으로 부여
    
    - 권한 → what? policy로 결정
    신뢰 → who?
    - assume Role(API)사용 Cloud Trail
    - Role를 사용하면 STS가 항상 동작(내부서비스라 안보임)
    STS(AK,SAK,token포함)
    - 다른 서비스를 호출 시 API가 발생 시 인증과 권한을 부여할 때 사용

# Account

- 각각의 account를 하나의 account로 묶기 위해서는 
AWS organization 기능 사용
- SCP(Service Control Policy) : root 레벨로 권한을 부여 (적용 대상이 root)
